{"version":3,"sources":["auth/local/index.js"],"names":[],"mappings":"AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AAEA,IAAI,SAAS,kBAAQ,MAAR,EAAb;;AAEA,OAAO,IAAP,CAAY,GAAZ,EAAiB,UAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,EAAyB;AACxC,qBAAS,YAAT,CAAsB,OAAtB,EAA+B,UAAS,GAAT,EAAc,IAAd,EAAoB,IAApB,EAA0B;AACvD,QAAI,QAAQ,OAAO,IAAnB;AACA,QAAI,KAAJ,EAAW;AACT,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,KAArB,CAAP;AACD;AACD,QAAI,CAAC,IAAL,EAAW;AACT,aAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAqB,EAAC,SAAS,yCAAV,EAArB,CAAP;AACD;;AAED,QAAI,QAAQ,qBAAU,KAAK,GAAf,EAAoB,KAAK,IAAzB,CAAZ;AACA,QAAI,IAAJ,CAAS,EAAE,YAAF,EAAT;AACD,GAXD,EAWG,GAXH,EAWQ,GAXR,EAWa,IAXb;AAYD,CAbD;;kBAee,M","file":"auth/local/index.js","sourcesContent":["'use strict';\r\n\r\nimport express from 'express';\r\nimport passport from 'passport';\r\nimport {signToken} from '../auth.service';\r\n\r\nvar router = express.Router();\r\n\r\nrouter.post('/', function(req, res, next) {\r\n  passport.authenticate('local', function(err, user, info) {\r\n    var error = err || info;\r\n    if (error) {\r\n      return res.status(401).json(error);\r\n    }\r\n    if (!user) {\r\n      return res.status(404).json({message: 'Something went wrong, please try again.'});\r\n    }\r\n\r\n    var token = signToken(user._id, user.role);\r\n    res.json({ token });\r\n  })(req, res, next)\r\n});\r\n\r\nexport default router;\r\n"],"sourceRoot":"/source/"}